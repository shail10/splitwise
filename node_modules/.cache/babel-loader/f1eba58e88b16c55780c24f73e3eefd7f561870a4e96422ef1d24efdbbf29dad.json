{"ast":null,"code":"class SimpleImage {\n  static get toolbox() {\n    return {\n      title: \"Image\",\n      icon: '<svg width=\"17\" height=\"15\" viewBox=\"0 0 336 276\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M291 150V79c0-19-15-34-34-34H79c-19 0-34 15-34 34v42l67-44 81 72 56-29 42 30zm0 52l-43-30-56 30-81-67-66 39v23c0 19 15 34 34 34h178c17 0 31-13 34-29zM79 0h178c44 0 79 35 79 79v118c0 44-35 79-79 79H79c-44 0-79-35-79-79V79C0 35 35 0 79 0z\"/></svg>'\n    };\n  }\n  constructor(_ref) {\n    let {\n      data,\n      api\n    } = _ref;\n    this.api = api;\n    this.data = {\n      url: data.url || '',\n      caption: data.caption || '',\n      withBorder: data.withBorder !== undefined ? data.withBorder : false,\n      withBackground: data.withBackground !== undefined ? data.withBackground : false,\n      stretched: data.stretched !== undefined ? data.stretched : false\n    };\n    this.wrapper = undefined;\n    this.settings = [{\n      name: 'withBorder',\n      icon: `<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z\"/></svg>`\n    }, {\n      name: 'stretched',\n      icon: `<svg width=\"17\" height=\"10\" viewBox=\"0 0 17 10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M13.568 5.925H4.056l1.703 1.703a1.125 1.125 0 0 1-1.59 1.591L.962 6.014A1.069 1.069 0 0 1 .588 4.26L4.38.469a1.069 1.069 0 0 1 1.512 1.511L4.084 3.787h9.606l-1.85-1.85a1.069 1.069 0 1 1 1.512-1.51l3.792 3.791a1.069 1.069 0 0 1-.475 1.788L13.514 9.16a1.125 1.125 0 0 1-1.59-1.591l1.644-1.644z\"/></svg>`\n    }, {\n      name: 'withBackground',\n      icon: `<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.043 8.265l3.183-3.183h-2.924L4.75 10.636v2.923l4.15-4.15v2.351l-2.158 2.159H8.9v2.137H4.7c-1.215 0-2.2-.936-2.2-2.09v-8.93c0-1.154.985-2.09 2.2-2.09h10.663l.033-.033.034.034c1.178.04 2.12.96 2.12 2.089v3.23H15.3V5.359l-2.906 2.906h-2.35zM7.951 5.082H4.75v3.201l3.201-3.2zm5.099 7.078v3.04h4.15v-3.04h-4.15zm-1.1-2.137h6.35c.635 0 1.15.489 1.15 1.092v5.13c0 .603-.515 1.092-1.15 1.092h-6.35c-.635 0-1.15-.489-1.15-1.092v-5.13c0-.603.515-1.092 1.15-1.092z\"/></svg>`\n    }];\n  }\n  render() {\n    this.wrapper = document.createElement(\"div\");\n    this.wrapper.classList.add(\"simple-image\");\n    if (this.data && this.data.url) {\n      this._createImage(this.data.url, this.data.caption);\n      return this.wrapper;\n    }\n    const input = document.createElement(\"input\");\n    input.placeholder = \"Paste an image URL...\";\n    input.addEventListener(\"paste\", event => {\n      this._createImage(event.clipboardData.getData(\"text\"));\n    });\n    this.wrapper.appendChild(input);\n    return this.wrapper;\n  }\n  _createImage(url, captionText) {\n    const image = document.createElement('img');\n    const caption = document.createElement('input');\n    image.src = url;\n    caption.placeholder = 'Caption...';\n    caption.value = captionText || '';\n    this.wrapper.innerHTML = '';\n    this.wrapper.appendChild(image);\n    this.wrapper.appendChild(caption);\n    this._acceptTuneView();\n  }\n  save(blockContent) {\n    const image = blockContent.querySelector('img');\n    const caption = blockContent.querySelector('[contenteditable]');\n    return Object.assign(this.data, {\n      url: image.src,\n      caption: caption.value\n    });\n  }\n  validate(savedData) {\n    if (!savedData.url.trim()) {\n      return false;\n    }\n    return true;\n  }\n  renderSettings() {\n    const wrapper = document.createElement('div');\n    this.settings.forEach(tune => {\n      let button = document.createElement('div');\n      button.classList.add('cdx-settings-button');\n      button.classList.toggle('cdx-settings-button--active', this.data[tune.name]);\n      button.innerHTML = tune.icon;\n      wrapper.appendChild(button);\n      button.addEventListener('click', () => {\n        this._toggleTune(tune.name);\n        button.classList.toggle('cdx-settings-button--active');\n      });\n    });\n    return wrapper;\n  }\n\n  /**\n   * @private\n   * Click on the Settings Button\n   * @param {string} tune — tune name from this.settings\n   */\n  _toggleTune(tune) {\n    this.data[tune] = !this.data[tune];\n    this._acceptTuneView();\n  }\n\n  /**\n   * Add specified class corresponds with activated tunes\n   * @private\n   */\n  _acceptTuneView() {\n    this.settings.forEach(tune => {\n      this.wrapper.classList.toggle(tune.name, !!this.data[tune.name]);\n      if (tune.name === 'stretched') {\n        this.api.blocks.stretchBlock(this.api.blocks.getCurrentBlockIndex(), !!this.data.stretched);\n      }\n    });\n  }\n}\nexport default SimpleImage;","map":{"version":3,"names":["SimpleImage","toolbox","title","icon","constructor","data","api","url","caption","withBorder","undefined","withBackground","stretched","wrapper","settings","name","render","document","createElement","classList","add","_createImage","input","placeholder","addEventListener","event","clipboardData","getData","appendChild","captionText","image","src","value","innerHTML","_acceptTuneView","save","blockContent","querySelector","Object","assign","validate","savedData","trim","renderSettings","forEach","tune","button","toggle","_toggleTune","blocks","stretchBlock","getCurrentBlockIndex"],"sources":["/Users/ksrajeshbhai/Desktop/prime/splitwise/src/components/NewNote/simple-image.js"],"sourcesContent":["class SimpleImage {\n    static get toolbox() {\n      return {\n        title: \"Image\",\n        icon: '<svg width=\"17\" height=\"15\" viewBox=\"0 0 336 276\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M291 150V79c0-19-15-34-34-34H79c-19 0-34 15-34 34v42l67-44 81 72 56-29 42 30zm0 52l-43-30-56 30-81-67-66 39v23c0 19 15 34 34 34h178c17 0 31-13 34-29zM79 0h178c44 0 79 35 79 79v118c0 44-35 79-79 79H79c-44 0-79-35-79-79V79C0 35 35 0 79 0z\"/></svg>',\n      };\n    }\n  \n    constructor({data, api}){\n      this.api = api;\n      this.data = {\n          url: data.url || '',\n          caption: data.caption || '',\n          withBorder: data.withBorder !== undefined ? data.withBorder : false,\n          withBackground: data.withBackground !== undefined ? data.withBackground : false,\n          stretched: data.stretched !== undefined ? data.stretched : false,\n      };\n      this.wrapper = undefined;\n      this.settings = [\n          {\n            name: 'withBorder',\n            icon: `<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z\"/></svg>`\n          },\n          {\n            name: 'stretched',\n            icon: `<svg width=\"17\" height=\"10\" viewBox=\"0 0 17 10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M13.568 5.925H4.056l1.703 1.703a1.125 1.125 0 0 1-1.59 1.591L.962 6.014A1.069 1.069 0 0 1 .588 4.26L4.38.469a1.069 1.069 0 0 1 1.512 1.511L4.084 3.787h9.606l-1.85-1.85a1.069 1.069 0 1 1 1.512-1.51l3.792 3.791a1.069 1.069 0 0 1-.475 1.788L13.514 9.16a1.125 1.125 0 0 1-1.59-1.591l1.644-1.644z\"/></svg>`\n          },\n          {\n            name: 'withBackground',\n            icon: `<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.043 8.265l3.183-3.183h-2.924L4.75 10.636v2.923l4.15-4.15v2.351l-2.158 2.159H8.9v2.137H4.7c-1.215 0-2.2-.936-2.2-2.09v-8.93c0-1.154.985-2.09 2.2-2.09h10.663l.033-.033.034.034c1.178.04 2.12.96 2.12 2.089v3.23H15.3V5.359l-2.906 2.906h-2.35zM7.951 5.082H4.75v3.201l3.201-3.2zm5.099 7.078v3.04h4.15v-3.04h-4.15zm-1.1-2.137h6.35c.635 0 1.15.489 1.15 1.092v5.13c0 .603-.515 1.092-1.15 1.092h-6.35c-.635 0-1.15-.489-1.15-1.092v-5.13c0-.603.515-1.092 1.15-1.092z\"/></svg>`\n          }\n        ];\n    }\n  \n    render() {\n      this.wrapper = document.createElement(\"div\");\n      this.wrapper.classList.add(\"simple-image\");\n  \n      if (this.data && this.data.url) {\n        this._createImage(this.data.url, this.data.caption);\n        return this.wrapper;\n      }\n  \n      const input = document.createElement(\"input\");\n  \n      input.placeholder = \"Paste an image URL...\";\n      input.addEventListener(\"paste\", (event) => {\n        this._createImage(event.clipboardData.getData(\"text\"));\n      });\n  \n      this.wrapper.appendChild(input);\n  \n      return this.wrapper;\n    }\n  \n    _createImage(url, captionText){\n      const image = document.createElement('img');\n      const caption = document.createElement('input');\n  \n      image.src = url;\n      caption.placeholder = 'Caption...';\n      caption.value = captionText || '';\n  \n      this.wrapper.innerHTML = '';\n      this.wrapper.appendChild(image);\n      this.wrapper.appendChild(caption);\n  \n      this._acceptTuneView();\n    }\n  \n    save(blockContent){\n      const image = blockContent.querySelector('img');\n      const caption = blockContent.querySelector('[contenteditable]');\n    \n      return Object.assign(this.data, {\n          url: image.src,\n          caption: caption.value\n      });\n    \n    }\n  \n    validate(savedData) {\n      if (!savedData.url.trim()) {\n        return false;\n      }\n  \n      return true;\n    }\n  \n    renderSettings(){\n      const wrapper = document.createElement('div');\n    \n      this.settings.forEach( tune => {\n        let button = document.createElement('div');\n    \n        button.classList.add('cdx-settings-button');\n        button.classList.toggle('cdx-settings-button--active', this.data[tune.name]);\n        button.innerHTML = tune.icon;\n        wrapper.appendChild(button);\n    \n        button.addEventListener('click', () => {\n          this._toggleTune(tune.name);\n          button.classList.toggle('cdx-settings-button--active');\n        });\n    \n      });\n    \n      return wrapper;\n    }\n  \n    /**\n     * @private\n     * Click on the Settings Button\n     * @param {string} tune — tune name from this.settings\n     */\n    _toggleTune(tune) {\n      this.data[tune] = !this.data[tune];\n      this._acceptTuneView();\n    }\n  \n    /**\n     * Add specified class corresponds with activated tunes\n     * @private\n     */\n     _acceptTuneView() {\n      this.settings.forEach( tune => {\n        this.wrapper.classList.toggle(tune.name, !!this.data[tune.name]);\n    \n        if (tune.name === 'stretched') {\n          this.api.blocks.stretchBlock(this.api.blocks.getCurrentBlockIndex(), !!this.data.stretched);\n        }\n      });\n      }\n  }\n  \n  export default SimpleImage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}